---
import { getLangFromUrl, useTranslations } from '@i18n/utils';
import Icon from './icon/Icon.astro';
import Typography from './Typography.astro';
import Button from './Button.astro';

interface Props {
  projectName: string
  excerpt: string
  projectHref: string
  classes?: string
}

const pageLang = getLangFromUrl(Astro.url);
const t = useTranslations(pageLang);

const {
  projectName,
  excerpt,
  projectHref,
  classes
} = Astro.props;
---

<div class:list={["project-context", classes]}>
  <div>
    <Typography as="h3" class="project-context__heading">
      {projectName}
    </Typography>
    <Typography as="p" class="project-context__excerpt">
      {excerpt}
    </Typography>
  </div>
  <Button as='a' href={projectHref} positionAware class="project-context__link" spanColor='rgba(74, 72, 76, 0.2)'>
    <figure>
      <Icon variant='RightArrow' />
    </figure>
    <span>{t("projects.seeProjectLabel")}</span>
  </Button>
</div>

<style lang="scss">
  .project-context {
    @include mediaq($bp-tablet) {
      height: 100%;
      width: 100%;
      padding: rem(16);
      border-radius: 8px;
      color: $primary-green;
      background-color: $primary-light-beige;
    }

    &__heading {
      margin: rem(8) 0 rem(4);

      @include mediaq($bp-tablet) {
        margin: 0 0 rem(8);
        line-height: 1;
      }
    }

    &__excerpt {
      margin-bottom: rem(4);
    }

    &__link {
      color: $primary-green;
      font-family: $quicksand;
      background-color: transparent;
      width: fit-content;
      align-self: flex-end;
      outline: 1px solid $primary-green !important;
    }
  }
</style>