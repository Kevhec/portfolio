---
import { Image } from 'astro:assets';
import type { ImageMetadata } from 'astro';
import Typography from './Typography.astro';
import { getLangFromUrl, useTranslations } from '@i18n/utils';

const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);

interface ImageType {
  src: ImageMetadata
  alt: string
}

interface Props {
  images: ImageType[]
}

const { images } = Astro.props
---

<section class="splide" aria-labelledby="gallery-heading">
  <Typography as='h2' class='gallery__heading'>
    {t('project.galleryHeading')}
  </Typography>

  <div class="splide__track">
    <ul class="splide__list">
      {
        images.map((image) => (
          <li class="splide__slide">
            <figure class="gallery__figure">
              <Image class="gallery__image" src={image.src} alt={image.alt} />
            </figure>
          </li>
        ))
      }
    </ul>
  </div>
</section>

<style lang="scss">
  .splide {
    margin-inline: auto;
  }

  .gallery {
    &__figure {
      display: flex;
      justify-content: center;
    }

    &__image {
      object-fit: contain;
      height: fit-content;
    }
  }
</style>

<script>
  import '@splidejs/splide/css'
  import Splide from '@splidejs/splide'

  new Splide('.splide', {
    width: '80%',
    breakpoints: {
      1024: {
        width: '100%'
      }
    }
  }).mount();
</script>