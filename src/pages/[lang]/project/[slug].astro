---
import Container from '@components/Container.astro';
import Typography from '@components/Typography.astro';
import Layout from '@layouts/Layout.astro';
import { Image } from 'astro:assets';
import { getCollection } from 'astro:content';

export async function getStaticPaths() {
  const pages = await getCollection('projects');

  const paths = pages.map((page) => {
    const [lang, ...slug] = page.slug.split('/');
    return {
      params: {
        lang,
        slug: slug.join('/') || undefined,
      },
      props: page,
    };
  });

  return paths;
}

const page = Astro.props;

const { Content } = await page.render();
---
<Layout title={page.data.title}>
  <Container>
    <Typography as='h1'>{page.data.title}</Typography>
    <Content />
  </Container>
</Layout>
